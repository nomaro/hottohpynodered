# Project desciption

Based on Original work of benlbrm : HOTTOHPY

This library can be used to discuss with HootoH based stove devices

Actually tested and validated with a MCZ VIVO 90.

To use this library you need to have a wifi capable stove.

Change IP adress in each py files.

Set.py with arguments "flame:[0-5]/fan1:[0-6]/fan2:[0-6]/mode:[off|man|eco]/" send command to the stove.
exemple :
```
python3 set.py flame:1/fan1:0/fan2:1/mode:man/
```

# Flow in node-red

```
[{"id":"49c7f2cf.9cc2ec","type":"tab","label":"LOX <> MCZ WIFI","disabled":false,"info":""},{"id":"caeeca19.0eea78","type":"debug","z":"49c7f2cf.9cc2ec","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":970,"y":240,"wires":[]},{"id":"151f5303.03a34d","type":"exec","z":"49c7f2cf.9cc2ec","command":"cd /home/pi/hottohpy ; python3 infos.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":720,"y":240,"wires":[["caeeca19.0eea78"],[],[]]},{"id":"a77faf4c.efda5","type":"inject","z":"49c7f2cf.9cc2ec","name":"","props":[{"p":"payload","v":"","vt":"date"},{"p":"topic","v":"","vt":"string"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":480,"y":240,"wires":[["151f5303.03a34d"]]},{"id":"a404ba6d.6493b8","type":"change","z":"49c7f2cf.9cc2ec","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload.flame","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":40,"wires":[["e9f87d69.3ee41"]]},{"id":"1ed46340.ac5e9d","type":"file in","z":"49c7f2cf.9cc2ec","name":"","filename":"mczfan1","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":820,"y":80,"wires":[["213e0f67.917dc"]]},{"id":"ed7c52af.6c30d","type":"file in","z":"49c7f2cf.9cc2ec","name":"","filename":"mczfan2","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":820,"y":120,"wires":[["4e0cc14c.6bd3c"]]},{"id":"905b52c8.55da2","type":"file in","z":"49c7f2cf.9cc2ec","name":"","filename":"mczmode","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":820,"y":160,"wires":[["80d425e0.4ce4c8"]]},{"id":"cd376f60.536c","type":"file in","z":"49c7f2cf.9cc2ec","name":"","filename":"mczflame","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":820,"y":40,"wires":[["61561d5f.bbe6e4"]]},{"id":"e9f87d69.3ee41","type":"file","z":"49c7f2cf.9cc2ec","name":"","filename":"mczflame","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"none","x":460,"y":40,"wires":[["53149f65.da99d"]]},{"id":"bcb1a531.409918","type":"file","z":"49c7f2cf.9cc2ec","name":"","filename":"mczfan1","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"none","x":460,"y":80,"wires":[["53149f65.da99d"]]},{"id":"58895007.43a7b","type":"file","z":"49c7f2cf.9cc2ec","name":"","filename":"mczfan2","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"none","x":460,"y":120,"wires":[["53149f65.da99d"]]},{"id":"caee4b89.e370d8","type":"file","z":"49c7f2cf.9cc2ec","name":"","filename":"mczmode","appendNewline":false,"createDir":true,"overwriteFile":"true","encoding":"none","x":460,"y":160,"wires":[["53149f65.da99d"]]},{"id":"213e0f67.917dc","type":"json","z":"49c7f2cf.9cc2ec","name":"","property":"payload","action":"","pretty":true,"x":950,"y":80,"wires":[["df1cc997.dbc9d8"]]},{"id":"4e0cc14c.6bd3c","type":"json","z":"49c7f2cf.9cc2ec","name":"","property":"payload","action":"","pretty":true,"x":950,"y":120,"wires":[["1fff02bc.64a75d"]]},{"id":"80d425e0.4ce4c8","type":"json","z":"49c7f2cf.9cc2ec","name":"","property":"payload","action":"","pretty":true,"x":950,"y":160,"wires":[["53ed5f1.771dea"]]},{"id":"61561d5f.bbe6e4","type":"json","z":"49c7f2cf.9cc2ec","name":"","property":"payload","action":"","pretty":true,"x":950,"y":40,"wires":[["534c08d2.81cdf8"]]},{"id":"53149f65.da99d","type":"trigger","z":"49c7f2cf.9cc2ec","name":"","op1":"","op2":"","op1type":"nul","op2type":"payl","duration":"700","extend":true,"overrideDelay":false,"units":"ms","reset":"","bytopic":"all","topic":"topic","outputs":1,"x":640,"y":100,"wires":[["cd376f60.536c","1ed46340.ac5e9d","ed7c52af.6c30d","905b52c8.55da2"]]},{"id":"690282b7.1730ec","type":"change","z":"49c7f2cf.9cc2ec","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload.fan1","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":80,"wires":[["bcb1a531.409918"]]},{"id":"6f796eab.6f636","type":"change","z":"49c7f2cf.9cc2ec","name":"","rules":[{"t":"move","p":"payload","pt":"msg","to":"payload.fan2","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":290,"y":120,"wires":[["58895007.43a7b"]]},{"id":"d78d7ba4.159bb8","type":"change","z":"49c7f2cf.9cc2ec","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"0","fromt":"num","to":"off","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"1","fromt":"num","to":"man","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"2","fromt":"num","to":"eco","tot":"str"},{"t":"move","p":"payload","pt":"msg","to":"payload.mode","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":159,"wires":[["caee4b89.e370d8"]]},{"id":"b453d0d6.4d6d7","type":"join","z":"49c7f2cf.9cc2ec","name":"","mode":"custom","build":"string","property":"payload","propertyType":"msg","key":"topic","joiner":"","joinerType":"str","accumulate":false,"timeout":"","count":"4","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"num","reduceFixup":"","x":1510,"y":100,"wires":[["3f63c9cd.2c4d06"]]},{"id":"3f63c9cd.2c4d06","type":"exec","z":"49c7f2cf.9cc2ec","command":"cd /home/pi/hottohpy ; python3 set.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1730,"y":100,"wires":[["31ac41e7.11662e"],[],[]]},{"id":"31ac41e7.11662e","type":"debug","z":"49c7f2cf.9cc2ec","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1970,"y":100,"wires":[]},{"id":"534c08d2.81cdf8","type":"change","z":"49c7f2cf.9cc2ec","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$string(payload)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1140,"y":40,"wires":[["41801fb6.95661"]]},{"id":"df1cc997.dbc9d8","type":"change","z":"49c7f2cf.9cc2ec","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$string(payload)\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1140,"y":80,"wires":[["7622628e.15fc6c"]]},{"id":"1fff02bc.64a75d","type":"change","z":"49c7f2cf.9cc2ec","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$string(payload)\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1140,"y":120,"wires":[["dfafc60e.25ff68"]]},{"id":"53ed5f1.771dea","type":"change","z":"49c7f2cf.9cc2ec","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"$string(payload)\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":1140,"y":160,"wires":[["90bbe3c3.a5483"]]},{"id":"41801fb6.95661","type":"change","z":"49c7f2cf.9cc2ec","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"{\"","fromt":"str","to":"","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"\":","fromt":"str","to":":","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"}","fromt":"str","to":"/","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":38,"wires":[["b453d0d6.4d6d7"]]},{"id":"7622628e.15fc6c","type":"change","z":"49c7f2cf.9cc2ec","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"{\"","fromt":"str","to":"","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"\":","fromt":"str","to":":","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"}","fromt":"str","to":"/","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":80,"wires":[["b453d0d6.4d6d7"]]},{"id":"dfafc60e.25ff68","type":"change","z":"49c7f2cf.9cc2ec","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"{\"","fromt":"str","to":"","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"\":","fromt":"str","to":":","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"}","fromt":"str","to":"/","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":120,"wires":[["b453d0d6.4d6d7"]]},{"id":"90bbe3c3.a5483","type":"change","z":"49c7f2cf.9cc2ec","name":"","rules":[{"t":"change","p":"payload","pt":"msg","from":"{\"","fromt":"str","to":"","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"\":","fromt":"str","to":":","tot":"str"},{"t":"change","p":"payload","pt":"msg","from":"}","fromt":"str","to":"/","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1320,"y":160,"wires":[["b453d0d6.4d6d7"]]}]
```
